<script src="{{{uiRootPath}}}/js/site.js"></script>
<script async src="{{{uiRootPath}}}/js/vendor/highlight.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-theme-classic@1.19.2/dist/theme.min.css"
  integrity="sha256-4Wtj6dqgMBT/Ji+vI49GON0NbfDlaJH06SUD7TH4yYg="
  crossorigin="anonymous"
/>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.30.0/dist/lite/builds/browser.umd.js" integrity="sha256-w/rbJ5CGTW5rub22bQ/VEoIHxypNh4NZPdkIJvGMZlI=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.79.0/dist/instantsearch.production.min.js" integrity="sha256-FOU2owonNoOmNxF4I8jLR4D8w/vziYNi64GUN2boXRQ=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-js@1"></script>



<script>

  const { autocomplete, getAlgoliaResults } = window['@algolia/autocomplete-js'];
  const { liteClient: algoliasearch } = window['algoliasearch/lite'];

  const searchClient = algoliasearch('{{site.keys.docsearchId}}', '{{site.keys.docsearchApi}}');

  autocomplete({
    container: '#search-input',
    placeholder: 'Search',
    openOnFocus: true,
    getSources({ query }) {
      return [
        {
          sourceId: 'algolia',
          getItems() {
            return getAlgoliaResults({
            searchClient,
            queries: [
              {
                indexName: '{{site.keys.docsearchIndex}}',
                params: {
                  query,
                  hitsPerPage: 5,
                  facetFilters: [
                    "product:Management Center",
                    "version:5.8",
                  ],
                  attributesToSnippet: ['title:10', 'content:35'],
                  snippetEllipsisText: 'â€¦',
                },
              }],
            });
          },
          templates: {
            item({ item, components, html }) {
              return html`
              <div class="aa-ItemWrapper">
                <div class="aa-ItemContent">
                  <div class="aa-ItemIcon">
                    <svg viewBox="0 0 20 20" width="20" height="20">
                      <path d="m14.386 14.386 4.088 4.088-4.088-4.088A7.533 7.533 0 1 1 3.733 3.733a7.533 7.533 0 0 1 10.653 10.653z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </div>
                  <div class="aa-ItemContentBody">
                    <div class="aa-ItemContentTitle">
                      ${components.Highlight({ hit: item, attribute: 'title' })}
                    </div>
                    <div class="aa-ItemContentDescription">
                      ${components.Snippet({ hit: item, attribute: 'content' })}
                    </div>
                  </div>
                </div>
              </div>`;
            },
          },
          getItemUrl({ item }) {
            return item.url;
          },
        },
      ];
    },
  });
</script>

<script>
  // Mobile Menu
  document.addEventListener('DOMContentLoaded', function () {
    const burger = document.getElementById('burger');
    const menu = document.getElementById('menu-holder');
    const closeBtn = document.getElementById('menu-close');

    if (burger && menu && closeBtn) {
      burger.addEventListener('click', function () {
        menu.classList.add('active');
        burger.style.display = 'none';
        document.body.style.overflow = 'hidden';
      });

      closeBtn.addEventListener('click', function () {
        menu.classList.remove('active');
        burger.style.display = 'flex';
        document.body.style.overflow = '';
      });

      // Reset burger on resize
      window.addEventListener('resize', function () {
        if (window.innerWidth > 1100) {
          burger.style.display = ''; // Remove inline style so CSS takes over
          menu.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    }
  });
</script>
<script>
  feather.replace();
</script>
